diff -ur linux-2.6.16.11/include/asm-powerpc/pmac_feature.h linux-2.6.16.11.ppcfixed/include/asm-powerpc/pmac_feature.h
--- linux-2.6.16.11/include/asm-powerpc/pmac_feature.h	2006-04-24 20:20:24.000000000 +0000
+++ linux-2.6.16.11.ppcfixed/include/asm-powerpc/pmac_feature.h	2006-05-01 18:12:50.000000000 +0000
@@ -378,7 +378,7 @@
  * Those are exported by pmac feature for internal use by arch code
  * only like the platform function callbacks, do not use directly in drivers
  */
-extern spinlock_t feature_lock;
+extern raw_spinlock_t feature_lock;
 extern struct device_node *uninorth_node;
 extern u32 __iomem *uninorth_base;
 
