--- linux-2.6.17/include/linux/skbuff.h~	2006-06-19 16:14:43.000000000 +0200
+++ linux-2.6.17/include/linux/skbuff.h	2006-06-19 16:57:47.000000000 +0200
@@ -19,6 +19,7 @@
 #include <linux/compiler.h>
 #include <linux/time.h>
 #include <linux/cache.h>
+#include <linux/ip.h>
 
 #include <asm/atomic.h>
 #include <asm/types.h>
--- linux-2.6.17/include/asm-ppc/io.h~	2006-06-18 01:49:35.000000000 +0000
+++ linux-2.6.17/include/asm-ppc/io.h	2006-06-22 02:44:19.000000000 +0000
@@ -445,6 +445,10 @@
 #define page_to_phys(page)	(page_to_pfn(page) << PAGE_SHIFT)
 #define page_to_bus(page)	(page_to_phys(page) + PCI_DRAM_OFFSET)
 
+#define isa_virt_to_bus virt_to_phys
+#define isa_page_to_bus page_to_phys
+#define isa_bus_to_virt phys_to_virt
+
 /* Enforce in-order execution of data I/O.
  * No distinction between read/write on PPC; use eieio for all three.
  */
